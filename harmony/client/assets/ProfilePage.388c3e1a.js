import{m as p,l as a,A as r,P as c,_ as b,u as x,e as I,b as i,S as L,c as d,a as o,t as S,n as B,F as w,r as F,v as M,s as C,o as g,g as k,p as j,k as A,i as N,j as V}from"./index.87b405aa.js";import{l as E}from"./LikesService.47c60f37.js";new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b");class R{async getFollowersByProfileId(s){const l=await p.get("account/"+s+"/profile");a.log("getting followers for profile",l.data),r.followers=l.data}async getFollowing(){try{const s=await p.get("profiles/followers");a.log("[getting ticket events]",s.data),r.myFollowers=s.data}catch(s){a.error(s),c.error(s.message)}}async followProfile(s){const l=await p.post("api/followers",s);a.log("creating follow"),r.followers.push(l.data),r.myFollowers.push(l.data),r.account.isFollowed=!0}async unfollowProfile(s){const l=await p.delete("api/followers/"+s);a.log(l.data),r.followers=r.followers.filter(n=>n.id!==s),r.account.isFollowed=!1}}const P=new R;const U={setup(){const t=x();async function s(){try{await M.getProfile(t.params.profileId)}catch(e){a.error(e),c.error(e.message)}}async function l(){try{await P.getFollowersByProfileId(t.params.profileId)}catch(e){a.error(e),c.error(e.message)}}async function n(){try{await P.getFollowing()}catch(e){a.error(e),c.error(e.message)}}async function _(){try{await C.getMySongs(t.params.profileId)}catch(e){a.error(e),c.error(e.message)}}async function m(){try{await E.getMyLikes(t.params.profileId)}catch(e){a.error(e),c.error(e.message)}}return I(()=>{s(),_(),l(),n(),m()}),{route:t,profile:i(()=>r.activeProfile),mySongs:i(()=>r.mySongs),songs:i(()=>r.songs),myLikes:i(()=>r.myLikes),myFollowers:i(()=>r.myFollowers),followers:i(()=>r.followers)}},components:{SongCard:L}},f=t=>(j("data-v-deaf978f"),t=t(),A(),t),z={class:"col-8 d-flex align-items-center justify-content-center"},D=["src"],T={class:"bg-transparent rounded p-5"},q={class:""},G=f(()=>o("h2",null,"followers:",-1)),H=f(()=>o("button",{class:"btn btn-success"},[o("i",{class:"mdi mdi-check"}),N("follow")],-1)),J=f(()=>o("div",{class:"row container-fluid"},null,-1)),K={class:"d-flex pt-3 pb-2 gap-2 p-5"},O={class:"row"},Q=f(()=>o("h4",null,"Artist songs",-1)),W={class:""},X=f(()=>o("h4",null,"My Liked Songs",-1));function Y(t,s,l,n,_,m){var y,h,v;const e=V("SongCard");return g(),d(w,null,[o("div",{class:"row cover-img card",style:B("background-image: url()")},[o("div",z,[o("img",{src:(y=n.profile)==null?void 0:y.picture,alt:"",class:"img-fluid profile-picture rounded-circle elevation-3"},null,8,D),o("div",T,[o("h1",q,S((h=n.profile)==null?void 0:h.name),1),o("h2",null,"Uploaded songs: "+S((v=n.songs.songUrl)==null?void 0:v.length),1),G,H])])],4),J,o("div",K,[o("div",O,[Q,(g(!0),d(w,null,F(n.mySongs,u=>(g(),d("div",W,[o("div",null,[k(e,{song:u},null,8,["song"])])]))),256)),(g(!0),d(w,null,F(n.myLikes,u=>(g(),d("div",null,[X,o("div",null,[k(e,{song:u.song},null,8,["song"])])]))),256))])])],64)}const ee=b(U,[["render",Y],["__scopeId","data-v-deaf978f"]]);export{ee as default};
